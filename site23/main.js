const wikiSentences = {
  "Introduction": [
    "Every story starts somewhere, but this one refuses to.",
    "This introduction is like a puzzle with missing pieces.",
    "If this were important, you'd already know about it.",
    "Some say beginnings matter, but we’re here to prove otherwise.",
    "Nothing truly starts here, except mild confusion.",
    "An introduction should prepare you, but this one won’t.",
    "Reading this won't change your life, but it might waste a few seconds.",
    "This is the first step on a road that leads nowhere.",
    "If introductions had emotions, this one would be indifferent.",
    "A proper introduction makes sense—this one is just here.",
    "Before diving in, take a moment to regret your choices.",
    "Words go here, meaning goes elsewhere.",
    "This introduction has been scientifically proven to exist.",
    "Not all introductions are useful. Exhibit A.",
    "You are now entering a land of nonsense and filler.",
    "People often skip introductions, and they’d be right to do so.",
    "This is where something interesting should go, but it won’t.",
    "Everything has a beginning, except things that don’t.",
    "This introduction was brought to you by randomness.",
    "If an introduction falls in a forest, does it make a sound?",
    "This is the textual equivalent of nodding without listening.",
    "It's not about how you start, it's about how you escape.",
    "The more you think about this sentence, the less it means.",
    "Words are just noises on paper, and this is especially true here.",
    "Every article has a first paragraph, but not all deserve one.",
    "This sentence was tested on readers like you.",
    "If knowledge is power, this is a power outage.",
    "The only thing this introduction introduces is itself.",
    "Here lies the beginning of something that never really begins.",
    "You’ve now read the first sentence, but at what cost?"
  ],
  "History": [
    "History is just today, but with different people.",
    "Nothing in history happened for the first time, except once.",
    "The past is full of mistakes, and this sentence is one of them.",
    "If history teaches us anything, it's that nobody listens to history.",
    "Everything in history was once the present, and it was just as messy.",
    "Some say history repeats itself, others say it just stutters.",
    "All great events started as someone's bad idea.",
    "History is like a book where every page argues with the last one.",
    "The past is written by the victors, and edited by the confused.",
    "Time travel isn’t real, but history books pretend it is.",
    "If something happened long enough ago, people will debate if it did at all.",
    "History is proof that people have always been bad at planning.",
    "Every major event was just another Tuesday for someone.",
    "In history, hindsight is 20/20 but nobody had glasses back then.",
    "What we call history, people back then called ‘right now.’",
    "Most historical moments started with ‘What’s the worst that could happen?’",
    "People in history were just as clueless as we are, if not more.",
    "Every time period thought it was the peak of intelligence. They were wrong.",
    "Old mistakes become lessons, new mistakes become history.",
    "The further back you go, the less accurate things get.",
    "Every war in history started because someone underestimated someone else.",
    "History is full of people ignoring obvious warning signs.",
    "A long time ago, someone probably complained about the same things you do.",
    "Civilizations rise and fall, but bad decisions stay consistent.",
    "History books are just very delayed news reports.",
    "Ancient wisdom is just old mistakes dressed up nicely.",
    "History repeats itself because people refuse to read it the first time.",
    "Most of history is just a list of things that went wrong.",
    "Nobody in history ever thought they were living in ‘history.’",
    "The past is full of people making modern problems look original."
  ],
  "Geography": [
    "Geography is the art of pretending lines on maps matter.",
    "Mountains exist to make landscapes and hiking more complicated.",
    "Rivers are just nature’s way of saying 'Go this way.'",
    "Borders are imaginary, but crossing them incorrectly isn’t.",
    "Everywhere is somewhere, unless it’s nowhere.",
    "The world is round, yet maps still manage to make it flat.",
    "Cities are just places where people decided to stop walking.",
    "Most deserts are just large beaches missing the water.",
    "Oceans are Earth's way of keeping most things undiscovered.",
    "Volcanoes exist to remind us that the Earth has an attitude.",
    "The equator is an invisible belt that keeps the planet from falling apart.",
    "People fight over land, but the land doesn’t care.",
    "The North Pole is just cold, flat, and disappointing.",
    "Geography is just Earth’s resume, listing all its features.",
    "Lakes are just puddles that never gave up.",
    "Mountains prove that even the ground likes to stand tall sometimes.",
    "Islands are just continents that decided to be independent.",
    "Geography shows that humans love naming things they don’t own.",
    "Plate tectonics is just Earth playing a slow-motion puzzle game.",
    "The more you explore, the bigger the world seems.",
    "A hill is just a lazy mountain.",
    "Geography is the reason some people get lost more impressively than others.",
    "Rainforests are just the Earth's overgrown gardens.",
    "No matter where you go, someone has already drawn a map of it.",
    "Some places are famous for being hard to find.",
    "If a place is important, someone will eventually put a flag on it.",
    "The biggest geographic discovery is realizing your map is upside down.",
    "Every continent has a place where nobody wants to live.",
    "The Earth doesn’t need us, but we sure need it.",
    "No matter how well you study geography, GPS still wins."
  ],
  "Culture": [
    "Culture is like soup—it’s best when it’s mixed, but sometimes you find something strange floating in it.",
    "Traditions are like old clothes; they either fit or they're left behind.",
    "Art is the only thing that can make a statement without actually saying anything.",
    "Every culture thinks its food is the best, but no one ever agrees.",
    "Music is just noise arranged in a way that somehow feels meaningful.",
    "Culture evolves by accident, and then people pretend it was planned.",
    "Language is the sound of people trying to explain themselves to each other.",
    "History repeats itself because cultures can’t remember the first time.",
    "The arts are just another way for people to express confusion.",
    "Traditions change like the weather, but we’re too stubborn to notice.",
    "Cultural differences are what make the world confusing yet interesting.",
    "People say culture is important, but no one really knows what it means.",
    "Everyone has a different idea of what ‘popular culture’ means, and that’s why it’s hard to define.",
    "Rituals are just habits that people can’t explain anymore.",
    "Culture is the collection of things we do without thinking, and then label it as ‘tradition.’",
    "Every culture has a symbol, but nobody knows where it came from.",
    "Fashion changes as quickly as the seasons, but somehow, it's always outdated.",
    "Dance is just a way to communicate without words, but no one understands the message.",
    "Culture is the result of people deciding they should all agree on something.",
    "A good culture is one that makes no sense, yet everyone loves it.",
    "If music is the universal language, then why does no one agree on the same genre?",
    "Culture is just a collection of habits that happen to survive.",
    "Languages change, but accents never do.",
    "Cultural heritage is just the things people keep doing because they can’t stop.",
    "The more cultures you study, the more you realize they’re all the same in some way.",
    "If there’s one thing every culture agrees on, it’s that food is important.",
    "Some cultures are great at celebrating, while others prefer to argue about it.",
    "Tradition is like a game of telephone: it’s never quite what it started as.",
    "Every culture has its own version of a holiday that doesn’t make sense to outsiders."
  ],
  "Economy": [
    "The economy is just a giant game of Monopoly, but with fewer rules.",
    "Money is just paper that people decided was important.",
    "Supply and demand are just fancy terms for ‘let's see what happens.’",
    "Economics is the science of making guesses about things nobody fully understands.",
    "The stock market is a rollercoaster with more drops than climbs.",
    "Wealth is relative; some people are rich in things, others in confusion.",
    "Inflation happens when money decides it wants to be less valuable.",
    "Economics is just the art of convincing people to pay for things they don't need.",
    "The global economy is like a giant puzzle where no one has all the pieces.",
    "Taxes are just an unspoken agreement between you and everyone else.",
    "If a country’s economy is strong, it’s probably because it’s really good at pretending.",
    "Capitalism is like a game where the rules change every time someone loses.",
    "Budgeting is just making sure you spend all your money in a way that looks responsible.",
    "Economists are the only people who can predict the past with confidence.",
    "A recession is just the economy taking a nap.",
    "Wealth distribution is like handing out slices of cake, but the cake is always uneven.",
    "The economy is a complex system of people pretending to understand it.",
    "Some people hoard money, others hoard confusion.",
    "Business is just a way to make the world more complicated than it needs to be.",
    "Credit is just money you don’t have yet, but you’ll pay it back... eventually.",
    "Interest rates are like mystery novels—nobody knows how they end.",
    "The economy’s ups and downs are just a reflection of how many people are nervous.",
    "Investing is just a guess with a chance of profit.",
    "Economic growth is just proof that there’s always room for more confusion.",
    "Market crashes happen because the economy likes a good surprise.",
    "Economists say one thing, but the world always does its own thing.",
    "A stable economy is just one that hasn’t fallen apart yet.",
    "The global economy is a network of tiny mistakes tied together with paper clips."
  ],
  "Politics": [
    "Politics is the art of pretending everyone agrees, while secretly everyone argues.",
    "Political debates are like reality TV, but with fewer entertaining moments.",
    "Every politician promises change, but the only thing that changes is their position.",
    "Democracy is just a fancy way of saying ‘let’s see who can argue the loudest.’",
    "In politics, every decision is a compromise, except when it isn’t.",
    "Political parties are just groups of people who agree on certain things but still disagree on others.",
    "Government policies are like instructions—most people ignore them.",
    "Politics is the reason everyone thinks they should have a better opinion than they do.",
    "Election campaigns are like sales pitches, but with less enthusiasm.",
    "Politicians are people who promise solutions, then spend most of their time explaining why they can’t.",
    "In politics, the truth is just another tool for manipulation.",
    "Campaign slogans are just catchy phrases that sound good but mean nothing.",
    "The only thing politicians can agree on is that they don’t agree on much.",
    "Policy changes are just a game of ‘who can be the least unpopular.’",
    "In politics, everyone says they're working for the people, but no one really knows what the people want.",
    "Governments are like weather—hard to predict and often unpleasant.",
    "Political speeches are like novels: long, drawn-out, and full of unnecessary details.",
    "A good politician is one who can make promises, and a great one is one who doesn’t keep them.",
    "In politics, the more things change, the more they stay the same... until they don’t.",
    "Political scandals are just distractions from what’s really going on.",
    "In politics, saying ‘we’ll fix it’ is just code for ‘we’ll try to avoid this issue for a while.’",
    "Politicians are always fighting for change, but somehow things stay stagnant.",
    "Democracy works as long as nobody actually has to agree on anything.",
    "In politics, there’s always a plan, even if no one knows what it is.",
    "Sometimes, the best political decisions are the ones that nobody notices.",
    "The political system is like a game of chess, but no one knows the rules.",
    "Political debates are just arguments where no one wins.",
    "In politics, it's always easier to criticize than to act.",
    "Political compromise is just a polite word for ‘giving up.’",
    "Every political party has the same goal: to be the one in charge, for now."
  ],
  "Education": [
    "Education is just a way to prove you can sit still for long periods of time.",
    "The best way to learn is to not really try, and still hope you get it.",
    "School teaches you how to remember things you’ll never use.",
    "Every lesson starts with confusion and ends with a nap.",
    "Teachers explain things only for you to forget them instantly.",
    "Homework is the art of pretending to learn while actually just guessing.",
    "Education is the process of learning things that will only be useful if you forget them later.",
    "The more you study, the less you seem to remember.",
    "In school, the answer is always in the back of the book, but nobody tells you that.",
    "The best part of education is the day it ends.",
    "Learning is just a form of organized procrastination.",
    "School is the only place where you can fail and still get an ‘A’ for effort.",
    "The more complicated the subject, the more likely you’ll never understand it.",
    "Teachers spend half their time trying to keep students awake.",
    "The only thing you learn in school is how to survive the next test.",
    "Education is just a way to convince you that you’re actually learning.",
    "School is where you find out how many hours you can spend staring blankly at a paper.",
    "The best way to study is to pretend you know everything already.",
    "In education, the goal is to pass, not necessarily to understand.",
    "Everyone says ‘education is important,’ but we all forget that during finals.",
    "The most valuable lesson in school is figuring out how to avoid work.",
    "Education is the key to knowledge, but you’ll need a locksmith to figure it out.",
    "School projects are just excuses to avoid real learning.",
    "You’ll remember everything from school, except what you were supposed to learn.",
    "Education teaches you to think, but only in the most confusing way.",
    "At school, every question seems like a trap.",
    "Graduation is the reward for surviving endless lectures.",
    "School teaches you how to write essays you’ll never read again.",
    "Learning isn’t about knowing the answers; it’s about pretending to care."
  ],
  "Science and Technology": [
    "Science is just a way of proving that we’re more confused than we thought.",
    "Technology is the reason everything is easier to do, but harder to explain.",
    "The best invention was the one you can’t explain but still use every day.",
    "Scientific breakthroughs happen when someone decides to ignore all previous theories.",
    "Technology evolves by breaking everything, then fixing it just enough to break again.",
    "Science is discovering things you wish you hadn’t known.",
    "The future of technology is here, but we’re still figuring out how to charge it.",
    "Technology moves so fast that even the manuals can’t keep up.",
    "Every scientific discovery begins with a question that nobody wants to answer.",
    "Science is just a bunch of people looking at things and saying, ‘What if?’",
    "Technology is a double-edged sword, but the handle is still being designed.",
    "Every new invention just leads to more questions about what went wrong.",
    "Science explains the universe, but only after confusing everyone first.",
    "Technology doesn’t make life easier; it just makes new problems to solve.",
    "Science is a game where no one knows the rules, but everyone’s playing.",
    "The more you learn about science, the more you realize it’s a giant puzzle.",
    "Technology advances by accident, then gets patented.",
    "Science is the art of proving things wrong until you’re right for a minute.",
    "The more we understand science, the more we realize we understand nothing.",
    "Technology is the reason you can’t stop using your phone, even when you should be working.",
    "Science is like magic, but with more equations and less fun.",
    "Every technological breakthrough just leads to a new set of problems to ignore.",
    "Science is the search for answers that always lead to more questions.",
    "Technology doesn’t solve problems; it just makes new ones that are harder to solve.",
    "In science, every answer opens up ten more mysteries.",
    "The best technological inventions are the ones we don’t understand but use anyway.",
    "Science is proving that the more we know, the less we understand.",
    "Technology moves forward, but only if it doesn’t crash first.",
    "The only predictable thing about science is how unpredictable it is."
  ],
  "References": [
    "References are just words people use when they want to sound smarter.",
    "Citing sources is just a way to pretend that your opinion isn’t just an opinion.",
    "References exist to make you look like you know what you’re talking about.",
    "The only thing more confusing than a reference list is trying to read one.",
    "References are like the fine print that nobody reads.",
    "If you quote enough experts, eventually you’ll sound like one.",
    "Citing references is like giving credit to people who never asked for it.",
    "References are just excuses to not explain your thoughts fully.",
    "The more references you have, the less you actually need to say.",
    "References are what make vague ideas seem less vague.",
    "A good reference is just one that no one questions.",
    "In research, the more references you have, the more your conclusions matter.",
    "References are like breadcrumbs leading you back to where you started.",
    "Citing a source is just another way to say, ‘I didn’t think of this myself.’",
    "References are used to convince you that someone else knows what they’re doing.",
    "A proper reference list is just a list of people who agree with your opinion.",
    "References are what make an argument look solid, even if it’s full of holes.",
    "The more references you use, the more likely it is that no one will check them.",
    "If you can’t explain something, just refer to an article that kind of gets it right.",
    "References turn casual ideas into highly debatable statements.",
    "A reference is just a way to dress up your uncertainty.",
    "In academic writing, references are the glitter that hides the mess underneath.",
    "References are the footnotes that are bigger than the actual story.",
    "Using references is just like playing a game of ‘who said it first.’",
    "If you have enough references, people will forget the topic altogether.",
    "Citations are the art of naming names to avoid having to make your own point.",
    "References are there to make your work look professional, even if it's not.",
    "The best way to avoid explaining yourself is to reference someone who doesn’t explain either.",
    "References are how you prove that someone else knows more than you do.",
    "A good reference is the best way to make an average idea sound revolutionary."
  ]
};
// funcs
function generateSector(parentElement, sectorId, sectorTitle, contentArray) {
    const sector = document.createElement('div');
    sector.id = sectorId;
    sector.classList.add('sector');

    const title = document.createElement('h2');
    title.textContent = sectorTitle;
    sector.appendChild(title);
    const contentElement = document.createElement('p');
    
    contentArray.forEach(content => {
        contentElement.textContent = `${contentElement.textContent} ${content}`;
        sector.appendChild(contentElement);
    });

    parentElement.appendChild(sector);
}

function randomValue(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function createSeededRNG(seed) {
    return function () {
        seed = (seed * 1664525 + 1013904223) % 4294967296;
        return (seed >>> 0) / 4294967296;
    };
}

function randomIndex(rng, arrayLength) {
    return Math.floor(rng() * arrayLength);
}

function simpleHash(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
        hash = (hash << 5) - hash + str.charCodeAt(i);
        hash |= 0;
    }
    return hash;
}

function startSearch() {
    const searchInput = document.getElementById("search");
    if (!searchInput) {
        console.error("Search input not found!");
        return;
    }

    const item = searchInput.value.trim();
    if (!item) {
        console.warn("No item provided!");
        return;
    }

    const currentUrl = new URL(window.location.href);
    currentUrl.searchParams.set("item", item);
    window.location.href = currentUrl.toString();
}

window.onload = function() {
    const params = new URLSearchParams(window.location.search);
    const item = params.get("item");

    if (!item) {
        console.error("Item parameter not found in URL!");
        return;
    }

    let newHash = simpleHash(item);
    let rng = createSeededRNG(newHash);
    let sectorsQuantity = randomIndex(rng, 10) + 1; // Ensuring at least 1 sector

    console.log(`Generating page for item: ${item} with ${sectorsQuantity} sectors.`);
    pageGenerator(item, sectorsQuantity);
};

function pageGenerator(topic, quantity) {
    document.getElementById("pageTitle").innerText = topic;
    const content = document.getElementById("content");
    content.style.display = "block";
    content.innerHTML = ""; // Clear previous content

    let rng = createSeededRNG(simpleHash(topic));

    // Get all category names from wikiSentences
    const categories = Object.keys(wikiSentences);  

    let usedCategories = new Set();  // Track used categories

    // Track used sentences for each category
    let usedSentences = {};

    for (let i = 0; i < quantity; i++) {
        // Filter categories to exclude those already used
        const availableCategories = categories.filter(category => !usedCategories.has(category));

        // If no categories are available, stop generating more sectors
        if (availableCategories.length === 0) {
            console.warn("No more unique categories available!");
            break;
        }

        // Randomly pick a category from the available ones
        const categoryIndex = randomIndex(rng, availableCategories.length);
        const categoryKey = availableCategories[categoryIndex];

        // Mark the category as used
        usedCategories.add(categoryKey);

        // Check if the category has content
        if (!wikiSentences[categoryKey] || wikiSentences[categoryKey].length === 0) {
            console.warn(`No content found for category: ${categoryKey}`);
            continue; // Skip this category if no content exists
        }

        // Initialize used sentences for this category if not already done
        if (!usedSentences[categoryKey]) {
            usedSentences[categoryKey] = new Set();
        }

        let sectorContent = [];
        let sectorLength = randomIndex(rng, wikiSentences[categoryKey].length);

        // Generate content for the sector
        for (let j = 0; j < sectorLength; j++) {
            // Filter out used sentences for the current category
            const availableSentences = wikiSentences[categoryKey].filter((sentence, index) => !usedSentences[categoryKey].has(index));

            // If there are no available sentences left, skip generating this sector
            if (availableSentences.length === 0) {
                console.warn(`No more available sentences in category: ${categoryKey}`);
                break;
            }

            // Randomly pick a sentence from the available ones
            const sentenceIndex = randomIndex(rng, availableSentences.length);
            const sentence = availableSentences[sentenceIndex];

            // Mark the sentence as used
            usedSentences[categoryKey].add(wikiSentences[categoryKey].indexOf(sentence));

            sectorContent.push(sentence);
        }

        // Create the sector with the selected category and content
        generateSector(content, `sector-${i + 1}`, categoryKey, sectorContent);
    }
}